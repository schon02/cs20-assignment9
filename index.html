<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="style.css" rel="stylesheet" />
    <!-- INCLUDING JQUERY-->
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="song_list.json"></script>

</head>

<body>
    <section>
 
    <h1>Part 3</h1>
        <!-- TABLE CONSTRUCTION-->
        <table id='table'>
            <!-- HEADING FORMATION -->
            <tr>
                <th>Song Title</th>
                <th>Artist Name</th>
                <th>Genre</th>
                <th>Release Year</th>
            </tr>
  
            <script>
                $(document).ready(function () {
  
                    // FETCHING DATA FROM JSON FILE
                    $.getJSON("song_list.json", 
                            function (data) {
                        var song = '';
  
                        // ITERATING THROUGH OBJECTS
                        $.each(data, function (key, value) {
  
                            //CONSTRUCTION OF ROWS HAVING
                            // DATA FROM JSON OBJECT
                            song += '<tr>';
                            song += '<td>' + 
                                value.title + '</td>';
  
                            song += '<td>' + 
                                value.artist + '</td>';
  
                            song += '<td>' + 
                                value.genre + '</td>';
  
                            song += '<td>' + 
                                value.releaseYear + '</td>';
  
                            song += '</tr>';
                        });
                          
                        //INSERTING ROWS INTO TABLE 
                        $('#table').append(song);
                    });
                });
            </script>
    </section>
   
    <h1>Part 2</h1>
    <div id="myData"></div>
    <script>
        fetch('song_list.json')
            .then(function (response) {
                return response.json();
            })
            .then(function (data) {
                appendData(data);
            })
            .catch(function (err) {
                console.log('error: ' + err);
            });
        function appendData(data) {
            var mainContainer = document.getElementById("myData");
            for (var i = 0; i < data.length; i++) {
                var div = document.createElement("div");
                div.innerHTML = 'Title: ' + data[i].title + ' ' + 'Artist: ' + data[i].artist + ' ' + 'Genre: ' + data[i].genre + ' ' + 'Release Year: ' + data[i].releaseYear;
                mainContainer.appendChild(div);
            }
        }
    </script>

    <p id="data">
    </p>

    <form>
        <label for="filter">Choose a genre: </label>
        <select id="filter" name="filter">
          <option value="pop">Pop</option>
          <option value="rock">Rock</option>
          <option value="slowPop">Slow Pop</option>
          <option value="indiePop">Indie Pop</option>
          <option value="hipHop">Hip Hop</option>
          <option value="popRock">Pop Rock</option>

        </select>
        <input type="submit" id="select_button">
      </form>

      <div id="filteredData"></div>
    

      <script>

          var selected; 

$(document).ready(function(){ 
  $('#select_button').click(function(){ 
    alert($('#filter :selected').text());
  });
});

        //   function filter() {
        //     selected = $('#filter :selected').text();
        //     alert(selected);
        //     document.getElementById("data").value = selected;
        //   }


          fetch('song_list.json')
            .then(function (response) {
                return response.json();
            })
            .then(function (data) {
                appendData2(data);
            })
            .catch(function (err) {
                console.log('error: ' + err);
            });
        function appendData2(data) {
            var mainContainer = document.getElementById("filteredData");
            for (var i = 0; i < data.length; i++) {
                var div = document.createElement("div");
                div.innerHTML = 'Title: ' + data[i].title + ' ' + 'Artist: ' + data[i].artist + ' ' + 'Genre: ' + data[i].genre + ' ' + 'Release Year: ' + data[i].releaseYear;
                if (data[i].genre == selected) {
                    mainContainer.appendChild(div);
                }
            }
        }

      </script>

</body>

<!-- <script type="text/javascript" src="song_list.json"></script>

<script type="text/javascript" >
    
fetch('song_list.json')
  .then(res => res.json()) // the .json() method parses the JSON response into a JS object literal
  .then(data => console.log(data));
    document.write(data);

    var jsonString = JSON.stringify(song_list.json);
    document.write(jsonString);

    function load() {
        var mydata = JSON.parse(data);
        alert(mydata.length);

        var div = document.getElementById('data');

        for(var i = 0; i < mydata.length; i++)
        {
            div.innerHTML = div.innerHTML + "<p class='inner' id="+i+">"+ mydata[i].name +"</p>" + "<br>";
        }
    }

</script> -->

</html>
