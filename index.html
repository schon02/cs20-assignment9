<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="style.css" rel="stylesheet" />
    <!-- INCLUDING JQUERY-->
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="song_list.json"></script>

</head>

<body>

    <h1>Part 2</h1>
    <div id="myData"></div>
    <script>
        fetch('song_list.json')
            .then(function (response) {
                return response.json();
            })
            .then(function (data) {
                appendData(data);
            })
            .catch(function (err) {
                console.log('error: ' + err);
            });
        function appendData(data) {
            var mainContainer = document.getElementById("myData");
            for (var i = 0; i < data.length; i++) {
                var div = document.createElement("div");
                div.innerHTML = 'Title: ' + data[i].title + ' ' + 'Artist: ' + data[i].artist + ' ' + 'Genre: ' + data[i].genre + ' ' + 'Release Year: ' + data[i].releaseYear;
                mainContainer.appendChild(div);
            }
        }
    </script>
    
    <section>    
    <h1>Part 3</h1>
        <!-- TABLE CONSTRUCTION-->
        <table id='table'>
            <!-- HEADING FORMATION -->
            <tr>
                <th>Song Title</th>
                <th>Artist Name</th>
                <th>Genre</th>
                <th>Release Year</th>
            </tr>
  
            <script>
                $(document).ready(function () {
  
                    // FETCHING DATA FROM JSON FILE
                    $.getJSON("song_list.json", 
                            function (data) {
                        var song = '';
  
                        // ITERATING THROUGH OBJECTS
                        $.each(data, function (key, value) {
  
                            //CONSTRUCTION OF ROWS HAVING
                            // DATA FROM JSON OBJECT
                            song += '<tr>';
                            song += '<td>' + 
                                value.title + '</td>';
  
                            song += '<td>' + 
                                value.artist + '</td>';
  
                            song += '<td>' + 
                                value.genre + '</td>';
  
                            song += '<td>' + 
                                value.releaseYear + '</td>';
  
                            song += '</tr>';
                        });
                          
                        //INSERTING ROWS INTO TABLE 
                        $('#table').append(song);
                    });
                });
            </script>
            </table>
    </section>


    <!-- <p id="data">
    </p> -->

        <h1>Part 4</h4>
    <form>
        <label for="filter">Choose a genre: </label>
        <select id="filter" name="filter">
          <option value="pop">Pop</option>
          <option value="rock">Rock</option>
          <option value="slowPop">Slow Pop</option>
          <option value="indiePop">Indie Pop</option>
          <option value="hipHop">Hip Hop</option>
          <option value="popRock">Pop Rock</option>
        </select>
        <button type='button' id="select_button">Submit</button> 
      </form>

      <div id="filteredData"></div>

<script>
    var selected; 

    $(document).ready(function(){ 
    $('#select_button').click(function(){ 
            selected = ($('#filter :selected').text());
            fetch('song_list.json')
            .then(function (response) {
                return response.json();
            })
            .then(function (data) {
                appendData2(data);
            })
            .catch(function (err) {
                console.log('error: ' + err);
            });         
    });
    });

    function appendData2(data) {
        document.getElementById("filteredData").innerHTML = "";
        var mainContainer = document.getElementById("filteredData");
        for (var i = 0; i < data.length; i++) {
            var div = document.createElement("div");
            div.innerHTML = 'Title: ' + data[i].title + ' ' + 'Artist: ' + data[i].artist + ' ' + 'Genre: ' + data[i].genre + ' ' + 'Release Year: ' + data[i].releaseYear;
            if (data[i].genre == selected) {
                mainContainer.appendChild(div);
            }
        }
    }

</script>

</body>
</html>
